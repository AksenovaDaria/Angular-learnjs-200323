<!-- <ng-template let-productsFromContext="$implicit" let-ngIfInputValue="ngIf" [ngIf]="products" [ngIfElse]="loader"> -->
<div
	*ngIf="products as ngIfInputValue; else loader; let productsFromContext = $implicit"
	class="scroll-container"
>
	<!-- <ng-template
			ngFor
			[ngForOf]="productsFromContext"
			[ngForTrackBy]="trackById"
			let-product
			let-productsFromNgForDirective="ngForOf"
			let-index="index"
		> -->
	<!-- {{productsFromNgForDirective}}
			{{index}} -->

	<!-- Для применения пагинации. chank - массив отображаемых элементов -->
	<ng-container
		*appPagination="
			let productsGroup of products;
			chankSize: 6;
			let pageIndexes = pageIndexes;
			let activeIndex = index;
			let next = next;
			let back = back;
			let selectIndex = selectIndex
		"
	>
		<div class="cards-container">
			<app-card
				*ngFor="let product of productsGroup; trackBy: trackById"
				class="card"
				[product]="product"
			></app-card>
		</div>

		<div class="pagination-container">
			<button mat-icon-button (click)="back()">
				<mat-icon>chevron_left</mat-icon>
			</button>
			<div class="pagination__page-number-container">
				<button
					*ngFor="let index of pageIndexes"
					mat-icon-button
					class="pagination__page-number"
					[class.pagination__page-number_active]="activeIndex === index"
					(click)="selectIndex(index)"
				>
					{{ index + 1 }}
				</button>
			</div>
			<button mat-icon-button (click)="next()">
				<mat-icon>chevron_right</mat-icon>
			</button>
		</div>
	</ng-container>

	<!-- </ng-template> -->
	<!-- <app-card
			class="card"
			[product]="productsFromContext[1]"
			(buy)="onBuy($event)"
		></app-card>
		<app-card
			class="card"
			[product]="productsFromContext[2]"
			(buy)="onBuy($event)"
		></app-card>
		<app-card
			class="card"
			[product]="productsFromContext[3]"
			(buy)="onBuy($event)"
		></app-card>
		<app-card
			class="card"
			[product]="productsFromContext[4]"
			(buy)="onBuy($event)"
		></app-card> -->
</div>
<!-- </ng-template> -->

<ng-template #loader>
	<mat-spinner class="loader"></mat-spinner>
</ng-template>
